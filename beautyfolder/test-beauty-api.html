<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beauty API Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        .results { margin-top: 20px; padding: 15px; background: #f5f5f5; }
        button { padding: 10px 20px; margin: 5px; }
    </style>
</head>
<body>
    <h1>Beauty Filter API Test</h1>
    
    <div class="test-section">
        <h3>Test 1: Basic API Connection</h3>
        <button onclick="testBasicAPI()">Test Basic API</button>
        <div id="basic-result"></div>
    </div>
    
    <div class="test-section">
        <h3>Test 2: Filter by Beauty Category</h3>
        <button onclick="testBeautyCategoryFilter()">Test Makeup Filter</button>
        <div id="category-result"></div>
    </div>
    
    <div class="test-section">
        <h3>Test 3: Filter by Price Range</h3>
        <button onclick="testPriceFilter()">Test Price Filter</button>
        <div id="price-result"></div>
    </div>
    
    <div class="test-section">
        <h3>Test 4: Combined Filters</h3>
        <button onclick="testCombinedFilters()">Test Combined Filters</button>
        <div id="combined-result"></div>
    </div>

    <script>
        function testBasicAPI() {
            const resultDiv = document.getElementById('basic-result');
            resultDiv.innerHTML = 'Testing...';
            
            fetch('filter-api.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    action: 'filter_products'
                })
            })
            .then(response => response.json())
            .then(data => {
                console.log('Basic API response:', data);
                resultDiv.innerHTML = `
                    <p><strong>Success:</strong> ${data.success}</p>
                    <p><strong>Message:</strong> ${data.message}</p>
                    <p><strong>Products Found:</strong> ${data.data ? data.data.total_count : 0}</p>
                `;
            })
            .catch(error => {
                console.error('Basic API error:', error);
                resultDiv.innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
            });
        }
        
        function testBeautyCategoryFilter() {
            const resultDiv = document.getElementById('category-result');
            resultDiv.innerHTML = 'Testing...';
            
            fetch('filter-api.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    action: 'filter_products',
                    beauty_categories: ['makeup']
                })
            })
            .then(response => response.json())
            .then(data => {
                console.log('Category filter response:', data);
                resultDiv.innerHTML = `
                    <p><strong>Success:</strong> ${data.success}</p>
                    <p><strong>Message:</strong> ${data.message}</p>
                    <p><strong>Makeup Products Found:</strong> ${data.data ? data.data.total_count : 0}</p>
                    ${data.data && data.data.products ? `
                        <p><strong>Sample Products:</strong></p>
                        <ul>
                            ${data.data.products.slice(0, 3).map(product => 
                                `<li>${product.name} - $${product.price} (${product.subcategory})</li>`
                            ).join('')}
                        </ul>
                    ` : ''}
                `;
            })
            .catch(error => {
                console.error('Category filter error:', error);
                resultDiv.innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
            });
        }
        
        function testPriceFilter() {
            const resultDiv = document.getElementById('price-result');
            resultDiv.innerHTML = 'Testing...';
            
            fetch('filter-api.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    action: 'filter_products',
                    price_ranges: ['0-15']
                })
            })
            .then(response => response.json())
            .then(data => {
                console.log('Price filter response:', data);
                resultDiv.innerHTML = `
                    <p><strong>Success:</strong> ${data.success}</p>
                    <p><strong>Message:</strong> ${data.message}</p>
                    <p><strong>Products Under $15:</strong> ${data.data ? data.data.total_count : 0}</p>
                `;
            })
            .catch(error => {
                console.error('Price filter error:', error);
                resultDiv.innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
            });
        }
        
        function testCombinedFilters() {
            const resultDiv = document.getElementById('combined-result');
            resultDiv.innerHTML = 'Testing...';
            
            fetch('filter-api.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    action: 'filter_products',
                    beauty_categories: ['skincare'],
                    price_ranges: ['15-30']
                })
            })
            .then(response => response.json())
            .then(data => {
                console.log('Combined filter response:', data);
                resultDiv.innerHTML = `
                    <p><strong>Success:</strong> ${data.success}</p>
                    <p><strong>Message:</strong> ${data.message}</p>
                    <p><strong>Skincare Products $15-30:</strong> ${data.data ? data.data.total_count : 0}</p>
                `;
            })
            .catch(error => {
                console.error('Combined filter error:', error);
                resultDiv.innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
            });
        }
        
        // Test basic API on page load
        console.log('Beauty API test page loaded');
        testBasicAPI();
    </script>
</body>
</html>



