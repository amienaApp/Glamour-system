<!DOCTYPE html>
<html>
<head>
    <title>Test Colors</title>
</head>
<body>
    <h1>Testing Color Loading</h1>
    <div id="color-filter-options">
        <div class="loading-colors" style="text-align: center; padding: 20px; color: #666;">
            <i class="fas fa-spinner fa-spin"></i> Loading colors...
        </div>
    </div>

    <script>
        // Test the color loading function
        function loadColorsFromDatabase() {
            console.log('Loading colors from database...');
            fetch('get-colors-api.php')
                .then(response => {
                    console.log('Response status:', response.status);
                    return response.json();
                })
                .then(data => {
                    console.log('Colors loaded successfully:', data);
                    if (data.success) {
                        populateColorFilter(data.data.colors);
                    } else {
                        console.error('Error loading colors:', data.message);
                        showColorLoadError();
                    }
                })
                .catch(error => {
                    console.error('Error fetching colors:', error);
                    showColorLoadError();
                });
        }
        
        function populateColorFilter(colors) {
            const colorContainer = document.getElementById('color-filter-options');
            if (!colorContainer) {
                console.error('Color container not found');
                return;
            }
            
            colorContainer.innerHTML = '';
            
            colors.forEach(color => {
                const label = document.createElement('label');
                label.className = 'color-option';
                label.style.display = 'block';
                label.style.margin = '5px 0';
                
                const isHexColor = /^#[0-9A-Fa-f]{6}$/.test(color.value);
                const colorName = isHexColor ? getColorNameFromHex(color.value) : color.value;
                const hexValue = isHexColor ? color.value : getHexFromColorName(color.value);
                
                const filterValue = isHexColor ? colorName.toLowerCase() : color.value.toLowerCase();
                
                label.innerHTML = `
                    <input type="checkbox" name="color[]" value="${filterValue}">
                    <span style="display: inline-block; width: 20px; height: 20px; background-color: ${hexValue}; border: 1px solid #ccc; margin-right: 10px;"></span>
                    ${colorName} (${color.count})
                `;
                
                colorContainer.appendChild(label);
            });
            
            console.log('Color filter populated with', colors.length, 'colors');
        }
        
        function getColorNameFromHex(hex) {
            const colorMap = {
                '#000000': 'Black',
                '#ffffff': 'White',
                '#ff0000': 'Red',
                '#00ff00': 'Lime Green',
                '#0000ff': 'Blue',
                '#ffff00': 'Yellow',
                '#ff00ff': 'Magenta',
                '#00ffff': 'Cyan',
                '#808080': 'Grey',
                '#c0c0c0': 'Silver',
                '#ffd700': 'Gold',
                '#ffa500': 'Orange',
                '#800080': 'Purple',
                '#ffc0cb': 'Pink',
                '#8b4513': 'Saddle Brown',
                '#f5f5dc': 'Beige',
                '#483c32': 'Taupe',
                '#0066cc': 'Royal Blue',
                '#228b22': 'Forest Green'
            };
            return colorMap[hex.toLowerCase()] || hex;
        }
        
        function getHexFromColorName(colorName) {
            const colorMap = {
                'black': '#000000',
                'white': '#ffffff',
                'red': '#ff0000',
                'lime green': '#00ff00',
                'blue': '#0000ff',
                'yellow': '#ffff00',
                'magenta': '#ff00ff',
                'cyan': '#00ffff',
                'grey': '#808080',
                'silver': '#c0c0c0',
                'gold': '#ffd700',
                'orange': '#ffa500',
                'purple': '#800080',
                'pink': '#ffc0cb',
                'saddle brown': '#8b4513',
                'beige': '#f5f5dc',
                'taupe': '#483c32',
                'royal blue': '#0066cc',
                'forest green': '#228b22'
            };
            return colorMap[colorName.toLowerCase()] || '#cccccc';
        }
        
        function showColorLoadError() {
            const colorContainer = document.getElementById('color-filter-options');
            if (colorContainer) {
                colorContainer.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #e53e3e;">
                        <p>Error loading colors. Please check the console for details.</p>
                    </div>
                `;
            }
        }
        
        // Load colors when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadColorsFromDatabase();
        });
    </script>
</body>
</html>

