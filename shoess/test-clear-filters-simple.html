<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Clear All Filters - Simple</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .test-container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 4px; }
        .clear-all-filters-btn {
            width: 100%;
            padding: 10px 16px;
            background-color: #f5f5f5;
            border: 1px solid #999999;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            color: #333333;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 10px 0;
        }
        .clear-all-filters-btn:hover {
            background-color: #e8e8e8;
            color: #000000;
            border-color: #666666;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .filter-option { margin: 10px 0; }
        .test-results { background: #f0f8ff; padding: 15px; border-radius: 4px; margin: 15px 0; }
        .success { color: #28a745; font-weight: bold; }
        .error { color: #dc3545; font-weight: bold; }
        .url-display { background: #f8f9fa; padding: 10px; border-radius: 4px; font-family: monospace; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Test Clear All Filters Button</h1>
        
        <div class="test-section">
            <h3>Current URL: <span id="current-url"></span></h3>
            <div class="url-display" id="url-display"></div>
        </div>
        
        <div class="test-section">
            <h3>Test Filters (Check some to simulate filtered state)</h3>
            
            <div class="filter-option">
                <label>
                    <input type="checkbox" name="gender[]" value="women" checked> Women
                </label>
            </div>
            
            <div class="filter-option">
                <label>
                    <input type="checkbox" name="size[]" value="36" checked> Size 36
                </label>
            </div>
            
            <div class="filter-option">
                <label>
                    <input type="checkbox" name="price[]" value="0-25" checked> Price $0-25
                </label>
            </div>
            
            <div class="filter-option">
                <select id="shoe-type-dropdown">
                    <option value="">All Shoe Types</option>
                    <option value="boots" selected>Boots</option>
                    <option value="sneakers">Sneakers</option>
                </select>
            </div>
            
            <button type="button" class="clear-all-filters-btn" id="clear-filters" onclick="clearAllFilters()">
                Clear All Filters
            </button>
        </div>
        
        <div class="test-section">
            <h3>Test Results</h3>
            <div id="test-results" class="test-results">
                <p>Click "Clear All Filters" to test the function...</p>
            </div>
        </div>
    </div>

    <script>
        // Simulate the exact clearAllFilters function from shoes sidebar
        function clearAllFilters() {
            console.log('Shoes: Clearing all filters...');
            
            // Reset filter state
            const currentFilters = {
                gender: '',
                size: '',
                color: '',
                priceRange: ''
            };
            
            // Clear ALL URL parameters to show all available products (default state)
            // This will show all shoes regardless of subcategory
            const newUrl = window.location.pathname;
            
            // Update test results
            updateTestResults(newUrl);
            
            // In a real scenario, this would redirect immediately:
            // window.location.href = newUrl;
            console.log('Would redirect to:', newUrl);
            
            // For testing purposes, also uncheck checkboxes to show the visual effect
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            
            const shoeTypeDropdown = document.getElementById('shoe-type-dropdown');
            if (shoeTypeDropdown) {
                shoeTypeDropdown.value = '';
            }
        }
        
        function updateTestResults(newUrl) {
            const results = document.getElementById('test-results');
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const dropdown = document.getElementById('shoe-type-dropdown');
            
            // Count checked checkboxes
            let checkedCount = 0;
            checkboxes.forEach(checkbox => {
                if (checkbox.checked) checkedCount++;
            });
            
            // Update URL display
            document.getElementById('current-url').textContent = window.location.href;
            document.getElementById('url-display').textContent = `Would redirect to: ${newUrl}`;
            
            // Overall test result
            const testPassed = checkedCount === 0 && dropdown.value === '';
            
            results.innerHTML = `
                <h4>${testPassed ? '‚úÖ TEST PASSED' : '‚ùå TEST FAILED'}</h4>
                <p><strong>Checkboxes cleared:</strong> ${checkedCount === 0 ? 'Yes' : 'No'} (${checkedCount} still checked)</p>
                <p><strong>Dropdown reset:</strong> ${dropdown.value === '' ? 'Yes' : 'No'}</p>
                <p><strong>URL cleaned:</strong> ${newUrl}</p>
                <p><strong>Expected behavior:</strong> All filters should be cleared and URL should be completely clean (no parameters) to show all available products</p>
                ${testPassed ? '<p class="success">üéâ The clearAllFilters function is working correctly!</p>' : '<p class="error">‚ö†Ô∏è Some issues detected. Check the details above.</p>'}
            `;
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Test page loaded. Ready to test clearAllFilters function.');
            updateTestResults(window.location.pathname);
        });
    </script>
</body>
</html>
